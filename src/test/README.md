# 异步测试示例

这个目录包含了异步测试的常见问题和最佳实践示例。

## 文件说明

### `__tests__/asyncTesting.test.ts`
展示异步测试中的常见问题和正确做法，包括：

#### 常见问题：
1. **忘记 await** - 最常见的新手错误
2. **超时问题** - 超过默认5秒限制的处理
3. **错误处理** - 如何正确测试异步错误

#### 最佳实践：
1. **正确的 async/await 用法**
2. **超时时间设置**
3. **Promise 匹配器的使用** (`resolves`/`rejects`)
4. **并发异步操作测试**

### `../utils/asyncUtils.ts`
包含各种异步函数，用于演示不同的测试场景：
- 快速异步函数
- 慢速异步函数（用于超时演示）
- 可能失败的异步函数
- API 调用模拟

## 运行测试

```bash
# 运行所有测试
npm test

# 运行异步测试示例
npm test asyncTesting

# 运行测试并查看覆盖率
npm run test:coverage
```

## 学习要点

1. **总是使用 `async/await`** 而不是 `.then()`
2. **为慢速测试设置合适的超时时间**
3. **使用 `resolves`/`rejects` 匹配器测试 Promise**
4. **正确处理异步错误**
5. **理解并发 vs 串行异步操作的区别**

## 对应幻灯片

这些示例对应幻灯片中"常见问题与解决方案"部分的内容，可以实际运行和验证。 